{"version":3,"sources":["../node_modules/monaco-editor/esm/vs/language/html/workerManager.js","../node_modules/monaco-editor/esm/vs/language/html/_deps/vscode-languageserver-types/main.js","../node_modules/monaco-editor/esm/vs/language/html/languageFeatures.js","../node_modules/monaco-editor/esm/vs/language/html/htmlMode.js"],"names":["Promise","monaco","STOP_WHEN_IDLE_FOR","WorkerManager","defaults","_this","_defaults","_worker","_idleCheckInterval","setInterval","_checkIfIdle","_lastUsedTime","_configChangeListener","onDidChange","_stopWorker","prototype","dispose","_client","Date","now","_getClient","editor","createWebWorker","options","languageId","getProxy","getLanguageServiceWorker","resources","_i","arguments","length","toShallowCancelPromise","then","client","_","withSyncedResources","p","completeCallback","errorCallback","r","c","e","Position","create","line","character","is","value","candidate","Is","defined","number","Range","one","two","three","four","start","end","Error","Location","uri","range","string","undefined","DiagnosticSeverity","Warning","Information","Hint","Diagnostic","message","severity","code","source","result","Command","title","command","args","TextEdit","replace","newText","insert","position","del","TextDocumentEdit","textDocument","edits","VersionedTextDocumentIdentifier","Array","isArray","TextEditChangeImpl","push","delete","add","edit","all","clear","splice","WorkspaceChange","workspaceEdit","_textEditChanges","Object","_workspaceEdit","documentChanges","forEach","textDocumentEdit","textEditChange","changes","keys","key","defineProperty","getTextEditChange","TextDocumentIdentifier","version","TextDocumentItem","text","MarkupKind","PlainText","Markdown","CompletionItemKind","Text","Method","Function","Constructor","Field","Variable","Class","Interface","Module","Property","Unit","Value","Enum","Keyword","Snippet","Color","File","Reference","Folder","EnumMember","Constant","Struct","Event","Operator","TypeParameter","InsertTextFormat","CompletionItem","label","CompletionList","items","isIncomplete","MarkedString","fromPlainText","plainText","ParameterInformation","documentation","SignatureInformation","parameters","DocumentHighlightKind","Read","Write","DocumentHighlight","kind","SymbolKind","Namespace","Package","String","Number","Boolean","Key","Null","SymbolInformation","name","containerName","CodeActionContext","diagnostics","typedArray","CodeLens","data","FormattingOptions","tabSize","insertSpaces","boolean","DocumentLink","target","EOL","TextDocument","content","FullTextDocument","lineCount","func","getText","positionAt","offsetAt","applyEdits","document","sortedEdits","mergeSort","compare","left","slice","right","leftIdx","rightIdx","i","ret","a","b","diff","lastModifiedOffset","startOffset","endOffset","substring","TextDocumentSaveReason","Manual","AfterDelay","FocusOut","_uri","_languageId","_version","_content","_lineOffsets","update","event","getLineOffsets","lineOffsets","isLineStart","ch","charAt","offset","Math","max","min","low","high","mid","floor","lineOffset","nextLineOffset","toString","call","check","every","ls","Uri","DiagnosticsAdapter","_disposables","_listener","onModelAdd","model","modeId","handle","getModeId","onDidChangeContent","setTimeout","_doValidate","onModelRemoved","setModelMarkers","uriStr","listener","onDidCreateModel","onWillDisposeModel","onDidChangeModelLanguage","getModels","d","resource","worker","doValidation","markers","map","toDiagnostics","getModel","err","error","toSeverity","lsSeverity","MarkerSeverity","Info","diag","fromPosition","column","lineNumber","fromRange","getStartPosition","getEndPosition","toRange","toCompletionItemKind","mItemKind","languages","fromCompletionItemKind","toTextEdit","textEdit","toCompletionItem","entry","insertText","sortText","filterText","detail","fromMarkdownString","fromCompletionItem","item","insertTextFormat","CompletionAdapter","provideCompletionItems","token","getWordUntilPosition","wordInfo","wireCancellationToken","doComplete","info","isMarkupContent","thing","toMarkdownString","language","toMarkedStringArray","contents","toLocation","location","parse","toSymbolKind","mKind","toHighlighKind","DocumentHighlightAdapter","provideDocumentHighlights","findDocumentHighlights","DocumentLinkAdapter","provideLinks","findDocumentLinks","fromFormattingOptions","DocumentFormattingEditProvider","provideDocumentFormattingEdits","format","DocumentRangeFormattingEditProvider","provideDocumentRangeFormattingEdits","promise","cancel","onCancellationRequested","setupMode","languageFeatures","uris","apply","registerCompletionItemProvider","registerDocumentHighlightProvider","registerLinkProvider","registerDocumentFormattingEditProvider","registerDocumentRangeFormattingEditProvider"],"mappings":"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","file":"htmlMode.4ed7a998.map","sourceRoot":"../demo","sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar Promise = monaco.Promise;\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1000; // 2min\nvar WorkerManager = /** @class */ (function () {\n    function WorkerManager(defaults) {\n        var _this = this;\n        this._defaults = defaults;\n        this._worker = null;\n        this._idleCheckInterval = setInterval(function () { return _this._checkIfIdle(); }, 30 * 1000);\n        this._lastUsedTime = 0;\n        this._configChangeListener = this._defaults.onDidChange(function () { return _this._stopWorker(); });\n    }\n    WorkerManager.prototype._stopWorker = function () {\n        if (this._worker) {\n            this._worker.dispose();\n            this._worker = null;\n        }\n        this._client = null;\n    };\n    WorkerManager.prototype.dispose = function () {\n        clearInterval(this._idleCheckInterval);\n        this._configChangeListener.dispose();\n        this._stopWorker();\n    };\n    WorkerManager.prototype._checkIfIdle = function () {\n        if (!this._worker) {\n            return;\n        }\n        var timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\n        if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\n            this._stopWorker();\n        }\n    };\n    WorkerManager.prototype._getClient = function () {\n        this._lastUsedTime = Date.now();\n        if (!this._client) {\n            this._worker = monaco.editor.createWebWorker({\n                // module that exports the create() method and returns a `HTMLWorker` instance\n                moduleId: 'vs/language/html/htmlWorker',\n                // passed in to the create() method\n                createData: {\n                    languageSettings: this._defaults.options,\n                    languageId: this._defaults.languageId\n                },\n                label: this._defaults.languageId\n            });\n            this._client = this._worker.getProxy();\n        }\n        return this._client;\n    };\n    WorkerManager.prototype.getLanguageServiceWorker = function () {\n        var _this = this;\n        var resources = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            resources[_i] = arguments[_i];\n        }\n        var _client;\n        return toShallowCancelPromise(this._getClient().then(function (client) {\n            _client = client;\n        }).then(function (_) {\n            return _this._worker.withSyncedResources(resources);\n        }).then(function (_) { return _client; }));\n    };\n    return WorkerManager;\n}());\nexport { WorkerManager };\nfunction toShallowCancelPromise(p) {\n    var completeCallback;\n    var errorCallback;\n    var r = new Promise(function (c, e) {\n        completeCallback = c;\n        errorCallback = e;\n    }, function () { });\n    p.then(completeCallback, errorCallback);\n    return r;\n}\n","/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\n/**\n * The Position namespace provides helper functions to work with\n * [Position](#Position) literals.\n */\nexport var Position;\n(function (Position) {\n    /**\n     * Creates a new Position literal from the given line and character.\n     * @param line The position's line.\n     * @param character The position's character.\n     */\n    function create(line, character) {\n        return { line: line, character: character };\n    }\n    Position.create = create;\n    /**\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\n    }\n    Position.is = is;\n})(Position || (Position = {}));\n/**\n * The Range namespace provides helper functions to work with\n * [Range](#Range) literals.\n */\nexport var Range;\n(function (Range) {\n    function create(one, two, three, four) {\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\n            return { start: Position.create(one, two), end: Position.create(three, four) };\n        }\n        else if (Position.is(one) && Position.is(two)) {\n            return { start: one, end: two };\n        }\n        else {\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\n        }\n    }\n    Range.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n    }\n    Range.is = is;\n})(Range || (Range = {}));\n/**\n * The Location namespace provides helper functions to work with\n * [Location](#Location) literals.\n */\nexport var Location;\n(function (Location) {\n    /**\n     * Creates a Location literal.\n     * @param uri The location's uri.\n     * @param range The location's range.\n     */\n    function create(uri, range) {\n        return { uri: uri, range: range };\n    }\n    Location.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n    }\n    Location.is = is;\n})(Location || (Location = {}));\n/**\n * The diagnostic's serverity.\n */\nexport var DiagnosticSeverity;\n(function (DiagnosticSeverity) {\n    /**\n     * Reports an error.\n     */\n    DiagnosticSeverity.Error = 1;\n    /**\n     * Reports a warning.\n     */\n    DiagnosticSeverity.Warning = 2;\n    /**\n     * Reports an information.\n     */\n    DiagnosticSeverity.Information = 3;\n    /**\n     * Reports a hint.\n     */\n    DiagnosticSeverity.Hint = 4;\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\n/**\n * The Diagnostic namespace provides helper functions to work with\n * [Diagnostic](#Diagnostic) literals.\n */\nexport var Diagnostic;\n(function (Diagnostic) {\n    /**\n     * Creates a new Diagnostic literal.\n     */\n    function create(range, message, severity, code, source) {\n        var result = { range: range, message: message };\n        if (Is.defined(severity)) {\n            result.severity = severity;\n        }\n        if (Is.defined(code)) {\n            result.code = code;\n        }\n        if (Is.defined(source)) {\n            result.source = source;\n        }\n        return result;\n    }\n    Diagnostic.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && Range.is(candidate.range)\n            && Is.string(candidate.message)\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n            && (Is.string(candidate.source) || Is.undefined(candidate.source));\n    }\n    Diagnostic.is = is;\n})(Diagnostic || (Diagnostic = {}));\n/**\n * The Command namespace provides helper functions to work with\n * [Command](#Command) literals.\n */\nexport var Command;\n(function (Command) {\n    /**\n     * Creates a new Command literal.\n     */\n    function create(title, command) {\n        var args = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            args[_i - 2] = arguments[_i];\n        }\n        var result = { title: title, command: command };\n        if (Is.defined(args) && args.length > 0) {\n            result.arguments = args;\n        }\n        return result;\n    }\n    Command.create = create;\n    /**\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.title);\n    }\n    Command.is = is;\n})(Command || (Command = {}));\n/**\n * The TextEdit namespace provides helper function to create replace,\n * insert and delete edits more easily.\n */\nexport var TextEdit;\n(function (TextEdit) {\n    /**\n     * Creates a replace text edit.\n     * @param range The range of text to be replaced.\n     * @param newText The new text.\n     */\n    function replace(range, newText) {\n        return { range: range, newText: newText };\n    }\n    TextEdit.replace = replace;\n    /**\n     * Creates a insert text edit.\n     * @param position The position to insert the text at.\n     * @param newText The text to be inserted.\n     */\n    function insert(position, newText) {\n        return { range: { start: position, end: position }, newText: newText };\n    }\n    TextEdit.insert = insert;\n    /**\n     * Creates a delete text edit.\n     * @param range The range of text to be deleted.\n     */\n    function del(range) {\n        return { range: range, newText: '' };\n    }\n    TextEdit.del = del;\n})(TextEdit || (TextEdit = {}));\n/**\n * The TextDocumentEdit namespace provides helper function to create\n * an edit that manipulates a text document.\n */\nexport var TextDocumentEdit;\n(function (TextDocumentEdit) {\n    /**\n     * Creates a new `TextDocumentEdit`\n     */\n    function create(textDocument, edits) {\n        return { textDocument: textDocument, edits: edits };\n    }\n    TextDocumentEdit.create = create;\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate)\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\n            && Array.isArray(candidate.edits);\n    }\n    TextDocumentEdit.is = is;\n})(TextDocumentEdit || (TextDocumentEdit = {}));\nvar TextEditChangeImpl = /** @class */ (function () {\n    function TextEditChangeImpl(edits) {\n        this.edits = edits;\n    }\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\n        this.edits.push(TextEdit.insert(position, newText));\n    };\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\n        this.edits.push(TextEdit.replace(range, newText));\n    };\n    TextEditChangeImpl.prototype.delete = function (range) {\n        this.edits.push(TextEdit.del(range));\n    };\n    TextEditChangeImpl.prototype.add = function (edit) {\n        this.edits.push(edit);\n    };\n    TextEditChangeImpl.prototype.all = function () {\n        return this.edits;\n    };\n    TextEditChangeImpl.prototype.clear = function () {\n        this.edits.splice(0, this.edits.length);\n    };\n    return TextEditChangeImpl;\n}());\n/**\n * A workspace change helps constructing changes to a workspace.\n */\nvar WorkspaceChange = /** @class */ (function () {\n    function WorkspaceChange(workspaceEdit) {\n        var _this = this;\n        this._textEditChanges = Object.create(null);\n        if (workspaceEdit) {\n            this._workspaceEdit = workspaceEdit;\n            if (workspaceEdit.documentChanges) {\n                workspaceEdit.documentChanges.forEach(function (textDocumentEdit) {\n                    var textEditChange = new TextEditChangeImpl(textDocumentEdit.edits);\n                    _this._textEditChanges[textDocumentEdit.textDocument.uri] = textEditChange;\n                });\n            }\n            else if (workspaceEdit.changes) {\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                    _this._textEditChanges[key] = textEditChange;\n                });\n            }\n        }\n    }\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n        /**\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\n         * use to be returned from a workspace edit operation like rename.\n         */\n        get: function () {\n            return this._workspaceEdit;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\n        if (VersionedTextDocumentIdentifier.is(key)) {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    documentChanges: []\n                };\n            }\n            if (!this._workspaceEdit.documentChanges) {\n                throw new Error('Workspace edit is not configured for versioned document changes.');\n            }\n            var textDocument = key;\n            var result = this._textEditChanges[textDocument.uri];\n            if (!result) {\n                var edits = [];\n                var textDocumentEdit = {\n                    textDocument: textDocument,\n                    edits: edits\n                };\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[textDocument.uri] = result;\n            }\n            return result;\n        }\n        else {\n            if (!this._workspaceEdit) {\n                this._workspaceEdit = {\n                    changes: Object.create(null)\n                };\n            }\n            if (!this._workspaceEdit.changes) {\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\n            }\n            var result = this._textEditChanges[key];\n            if (!result) {\n                var edits = [];\n                this._workspaceEdit.changes[key] = edits;\n                result = new TextEditChangeImpl(edits);\n                this._textEditChanges[key] = result;\n            }\n            return result;\n        }\n    };\n    return WorkspaceChange;\n}());\nexport { WorkspaceChange };\n/**\n * The TextDocumentIdentifier namespace provides helper functions to work with\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\n */\nexport var TextDocumentIdentifier;\n(function (TextDocumentIdentifier) {\n    /**\n     * Creates a new TextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     */\n    function create(uri) {\n        return { uri: uri };\n    }\n    TextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri);\n    }\n    TextDocumentIdentifier.is = is;\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\n/**\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\n */\nexport var VersionedTextDocumentIdentifier;\n(function (VersionedTextDocumentIdentifier) {\n    /**\n     * Creates a new VersionedTextDocumentIdentifier literal.\n     * @param uri The document's uri.\n     * @param uri The document's text.\n     */\n    function create(uri, version) {\n        return { uri: uri, version: version };\n    }\n    VersionedTextDocumentIdentifier.create = create;\n    /**\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.number(candidate.version);\n    }\n    VersionedTextDocumentIdentifier.is = is;\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\n/**\n * The TextDocumentItem namespace provides helper functions to work with\n * [TextDocumentItem](#TextDocumentItem) literals.\n */\nexport var TextDocumentItem;\n(function (TextDocumentItem) {\n    /**\n     * Creates a new TextDocumentItem literal.\n     * @param uri The document's uri.\n     * @param languageId The document's language identifier.\n     * @param version The document's version number.\n     * @param text The document's text.\n     */\n    function create(uri, languageId, version, text) {\n        return { uri: uri, languageId: languageId, version: version, text: text };\n    }\n    TextDocumentItem.create = create;\n    /**\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\n    }\n    TextDocumentItem.is = is;\n})(TextDocumentItem || (TextDocumentItem = {}));\n/**\n * Describes the content type that a client supports in various\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n *\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\n * are reserved for internal usage.\n */\nexport var MarkupKind;\n(function (MarkupKind) {\n    /**\n     * Plain text is supported as a content format\n     */\n    MarkupKind.PlainText = 'plaintext';\n    /**\n     * Markdown is supported as a content format\n     */\n    MarkupKind.Markdown = 'markdown';\n})(MarkupKind || (MarkupKind = {}));\n/**\n * The kind of a completion entry.\n */\nexport var CompletionItemKind;\n(function (CompletionItemKind) {\n    CompletionItemKind.Text = 1;\n    CompletionItemKind.Method = 2;\n    CompletionItemKind.Function = 3;\n    CompletionItemKind.Constructor = 4;\n    CompletionItemKind.Field = 5;\n    CompletionItemKind.Variable = 6;\n    CompletionItemKind.Class = 7;\n    CompletionItemKind.Interface = 8;\n    CompletionItemKind.Module = 9;\n    CompletionItemKind.Property = 10;\n    CompletionItemKind.Unit = 11;\n    CompletionItemKind.Value = 12;\n    CompletionItemKind.Enum = 13;\n    CompletionItemKind.Keyword = 14;\n    CompletionItemKind.Snippet = 15;\n    CompletionItemKind.Color = 16;\n    CompletionItemKind.File = 17;\n    CompletionItemKind.Reference = 18;\n    CompletionItemKind.Folder = 19;\n    CompletionItemKind.EnumMember = 20;\n    CompletionItemKind.Constant = 21;\n    CompletionItemKind.Struct = 22;\n    CompletionItemKind.Event = 23;\n    CompletionItemKind.Operator = 24;\n    CompletionItemKind.TypeParameter = 25;\n})(CompletionItemKind || (CompletionItemKind = {}));\n/**\n * Defines whether the insert text in a completion item should be interpreted as\n * plain text or a snippet.\n */\nexport var InsertTextFormat;\n(function (InsertTextFormat) {\n    /**\n     * The primary text to be inserted is treated as a plain string.\n     */\n    InsertTextFormat.PlainText = 1;\n    /**\n     * The primary text to be inserted is treated as a snippet.\n     *\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n     * the end of the snippet. Placeholders with equal identifiers are linked,\n     * that is typing in one will update others too.\n     *\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\n     */\n    InsertTextFormat.Snippet = 2;\n})(InsertTextFormat || (InsertTextFormat = {}));\n/**\n * The CompletionItem namespace provides functions to deal with\n * completion items.\n */\nexport var CompletionItem;\n(function (CompletionItem) {\n    /**\n     * Create a completion item and seed it with a label.\n     * @param label The completion item's label\n     */\n    function create(label) {\n        return { label: label };\n    }\n    CompletionItem.create = create;\n})(CompletionItem || (CompletionItem = {}));\n/**\n * The CompletionList namespace provides functions to deal with\n * completion lists.\n */\nexport var CompletionList;\n(function (CompletionList) {\n    /**\n     * Creates a new completion list.\n     *\n     * @param items The completion items.\n     * @param isIncomplete The list is not complete.\n     */\n    function create(items, isIncomplete) {\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\n    }\n    CompletionList.create = create;\n})(CompletionList || (CompletionList = {}));\nexport var MarkedString;\n(function (MarkedString) {\n    /**\n     * Creates a marked string from plain text.\n     *\n     * @param plainText The plain text.\n     */\n    function fromPlainText(plainText) {\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\"); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    }\n    MarkedString.fromPlainText = fromPlainText;\n})(MarkedString || (MarkedString = {}));\n/**\n * The ParameterInformation namespace provides helper functions to work with\n * [ParameterInformation](#ParameterInformation) literals.\n */\nexport var ParameterInformation;\n(function (ParameterInformation) {\n    /**\n     * Creates a new parameter information literal.\n     *\n     * @param label A label string.\n     * @param documentation A doc string.\n     */\n    function create(label, documentation) {\n        return documentation ? { label: label, documentation: documentation } : { label: label };\n    }\n    ParameterInformation.create = create;\n    ;\n})(ParameterInformation || (ParameterInformation = {}));\n/**\n * The SignatureInformation namespace provides helper functions to work with\n * [SignatureInformation](#SignatureInformation) literals.\n */\nexport var SignatureInformation;\n(function (SignatureInformation) {\n    function create(label, documentation) {\n        var parameters = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            parameters[_i - 2] = arguments[_i];\n        }\n        var result = { label: label };\n        if (Is.defined(documentation)) {\n            result.documentation = documentation;\n        }\n        if (Is.defined(parameters)) {\n            result.parameters = parameters;\n        }\n        else {\n            result.parameters = [];\n        }\n        return result;\n    }\n    SignatureInformation.create = create;\n})(SignatureInformation || (SignatureInformation = {}));\n/**\n * A document highlight kind.\n */\nexport var DocumentHighlightKind;\n(function (DocumentHighlightKind) {\n    /**\n     * A textual occurrance.\n     */\n    DocumentHighlightKind.Text = 1;\n    /**\n     * Read-access of a symbol, like reading a variable.\n     */\n    DocumentHighlightKind.Read = 2;\n    /**\n     * Write-access of a symbol, like writing to a variable.\n     */\n    DocumentHighlightKind.Write = 3;\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\n/**\n * DocumentHighlight namespace to provide helper functions to work with\n * [DocumentHighlight](#DocumentHighlight) literals.\n */\nexport var DocumentHighlight;\n(function (DocumentHighlight) {\n    /**\n     * Create a DocumentHighlight object.\n     * @param range The range the highlight applies to.\n     */\n    function create(range, kind) {\n        var result = { range: range };\n        if (Is.number(kind)) {\n            result.kind = kind;\n        }\n        return result;\n    }\n    DocumentHighlight.create = create;\n})(DocumentHighlight || (DocumentHighlight = {}));\n/**\n * A symbol kind.\n */\nexport var SymbolKind;\n(function (SymbolKind) {\n    SymbolKind.File = 1;\n    SymbolKind.Module = 2;\n    SymbolKind.Namespace = 3;\n    SymbolKind.Package = 4;\n    SymbolKind.Class = 5;\n    SymbolKind.Method = 6;\n    SymbolKind.Property = 7;\n    SymbolKind.Field = 8;\n    SymbolKind.Constructor = 9;\n    SymbolKind.Enum = 10;\n    SymbolKind.Interface = 11;\n    SymbolKind.Function = 12;\n    SymbolKind.Variable = 13;\n    SymbolKind.Constant = 14;\n    SymbolKind.String = 15;\n    SymbolKind.Number = 16;\n    SymbolKind.Boolean = 17;\n    SymbolKind.Array = 18;\n    SymbolKind.Object = 19;\n    SymbolKind.Key = 20;\n    SymbolKind.Null = 21;\n    SymbolKind.EnumMember = 22;\n    SymbolKind.Struct = 23;\n    SymbolKind.Event = 24;\n    SymbolKind.Operator = 25;\n    SymbolKind.TypeParameter = 26;\n})(SymbolKind || (SymbolKind = {}));\nexport var SymbolInformation;\n(function (SymbolInformation) {\n    /**\n     * Creates a new symbol information literal.\n     *\n     * @param name The name of the symbol.\n     * @param kind The kind of the symbol.\n     * @param range The range of the location of the symbol.\n     * @param uri The resource of the location of symbol, defaults to the current document.\n     * @param containerName The name of the symbol containg the symbol.\n     */\n    function create(name, kind, range, uri, containerName) {\n        var result = {\n            name: name,\n            kind: kind,\n            location: { uri: uri, range: range }\n        };\n        if (containerName) {\n            result.containerName = containerName;\n        }\n        return result;\n    }\n    SymbolInformation.create = create;\n})(SymbolInformation || (SymbolInformation = {}));\n/**\n * The CodeActionContext namespace provides helper functions to work with\n * [CodeActionContext](#CodeActionContext) literals.\n */\nexport var CodeActionContext;\n(function (CodeActionContext) {\n    /**\n     * Creates a new CodeActionContext literal.\n     */\n    function create(diagnostics) {\n        return { diagnostics: diagnostics };\n    }\n    CodeActionContext.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is);\n    }\n    CodeActionContext.is = is;\n})(CodeActionContext || (CodeActionContext = {}));\n/**\n * The CodeLens namespace provides helper functions to work with\n * [CodeLens](#CodeLens) literals.\n */\nexport var CodeLens;\n(function (CodeLens) {\n    /**\n     * Creates a new CodeLens literal.\n     */\n    function create(range, data) {\n        var result = { range: range };\n        if (Is.defined(data))\n            result.data = data;\n        return result;\n    }\n    CodeLens.create = create;\n    /**\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n    }\n    CodeLens.is = is;\n})(CodeLens || (CodeLens = {}));\n/**\n * The FormattingOptions namespace provides helper functions to work with\n * [FormattingOptions](#FormattingOptions) literals.\n */\nexport var FormattingOptions;\n(function (FormattingOptions) {\n    /**\n     * Creates a new FormattingOptions literal.\n     */\n    function create(tabSize, insertSpaces) {\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\n    }\n    FormattingOptions.create = create;\n    /**\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n    }\n    FormattingOptions.is = is;\n})(FormattingOptions || (FormattingOptions = {}));\n/**\n * A document link is a range in a text document that links to an internal or external resource, like another\n * text document or a web site.\n */\nvar DocumentLink = /** @class */ (function () {\n    function DocumentLink() {\n    }\n    return DocumentLink;\n}());\nexport { DocumentLink };\n/**\n * The DocumentLink namespace provides helper functions to work with\n * [DocumentLink](#DocumentLink) literals.\n */\n(function (DocumentLink) {\n    /**\n     * Creates a new DocumentLink literal.\n     */\n    function create(range, target) {\n        return { range: range, target: target };\n    }\n    DocumentLink.create = create;\n    /**\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n    }\n    DocumentLink.is = is;\n})(DocumentLink || (DocumentLink = {}));\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\nexport var TextDocument;\n(function (TextDocument) {\n    /**\n     * Creates a new ITextDocument literal from the given uri and content.\n     * @param uri The document's uri.\n     * @param languageId  The document's language Id.\n     * @param content The document's content.\n     */\n    function create(uri, languageId, version, content) {\n        return new FullTextDocument(uri, languageId, version, content);\n    }\n    TextDocument.create = create;\n    /**\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\n     */\n    function is(value) {\n        var candidate = value;\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n    }\n    TextDocument.is = is;\n    function applyEdits(document, edits) {\n        var text = document.getText();\n        var sortedEdits = mergeSort(edits, function (a, b) {\n            var diff = a.range.start.line - b.range.start.line;\n            if (diff === 0) {\n                return a.range.start.character - b.range.start.character;\n            }\n            return 0;\n        });\n        var lastModifiedOffset = text.length;\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\n            var e = sortedEdits[i];\n            var startOffset = document.offsetAt(e.range.start);\n            var endOffset = document.offsetAt(e.range.end);\n            if (endOffset <= lastModifiedOffset) {\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n            }\n            else {\n                throw new Error('Ovelapping edit');\n            }\n            lastModifiedOffset = startOffset;\n        }\n        return text;\n    }\n    TextDocument.applyEdits = applyEdits;\n    function mergeSort(data, compare) {\n        if (data.length <= 1) {\n            // sorted\n            return data;\n        }\n        var p = (data.length / 2) | 0;\n        var left = data.slice(0, p);\n        var right = data.slice(p);\n        mergeSort(left, compare);\n        mergeSort(right, compare);\n        var leftIdx = 0;\n        var rightIdx = 0;\n        var i = 0;\n        while (leftIdx < left.length && rightIdx < right.length) {\n            var ret = compare(left[leftIdx], right[rightIdx]);\n            if (ret <= 0) {\n                // smaller_equal -> take left to preserve order\n                data[i++] = left[leftIdx++];\n            }\n            else {\n                // greater -> take right\n                data[i++] = right[rightIdx++];\n            }\n        }\n        while (leftIdx < left.length) {\n            data[i++] = left[leftIdx++];\n        }\n        while (rightIdx < right.length) {\n            data[i++] = right[rightIdx++];\n        }\n        return data;\n    }\n})(TextDocument || (TextDocument = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nexport var TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (TextDocumentSaveReason = {}));\nvar FullTextDocument = /** @class */ (function () {\n    function FullTextDocument(uri, languageId, version, content) {\n        this._uri = uri;\n        this._languageId = languageId;\n        this._version = version;\n        this._content = content;\n        this._lineOffsets = null;\n    }\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n        get: function () {\n            return this._uri;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n        get: function () {\n            return this._languageId;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    FullTextDocument.prototype.getText = function (range) {\n        if (range) {\n            var start = this.offsetAt(range.start);\n            var end = this.offsetAt(range.end);\n            return this._content.substring(start, end);\n        }\n        return this._content;\n    };\n    FullTextDocument.prototype.update = function (event, version) {\n        this._content = event.text;\n        this._version = version;\n        this._lineOffsets = null;\n    };\n    FullTextDocument.prototype.getLineOffsets = function () {\n        if (this._lineOffsets === null) {\n            var lineOffsets = [];\n            var text = this._content;\n            var isLineStart = true;\n            for (var i = 0; i < text.length; i++) {\n                if (isLineStart) {\n                    lineOffsets.push(i);\n                    isLineStart = false;\n                }\n                var ch = text.charAt(i);\n                isLineStart = (ch === '\\r' || ch === '\\n');\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                    i++;\n                }\n            }\n            if (isLineStart && text.length > 0) {\n                lineOffsets.push(text.length);\n            }\n            this._lineOffsets = lineOffsets;\n        }\n        return this._lineOffsets;\n    };\n    FullTextDocument.prototype.positionAt = function (offset) {\n        offset = Math.max(Math.min(offset, this._content.length), 0);\n        var lineOffsets = this.getLineOffsets();\n        var low = 0, high = lineOffsets.length;\n        if (high === 0) {\n            return Position.create(0, offset);\n        }\n        while (low < high) {\n            var mid = Math.floor((low + high) / 2);\n            if (lineOffsets[mid] > offset) {\n                high = mid;\n            }\n            else {\n                low = mid + 1;\n            }\n        }\n        // low is the least x for which the line offset is larger than the current offset\n        // or array.length if no line offset is larger than the current offset\n        var line = low - 1;\n        return Position.create(line, offset - lineOffsets[line]);\n    };\n    FullTextDocument.prototype.offsetAt = function (position) {\n        var lineOffsets = this.getLineOffsets();\n        if (position.line >= lineOffsets.length) {\n            return this._content.length;\n        }\n        else if (position.line < 0) {\n            return 0;\n        }\n        var lineOffset = lineOffsets[position.line];\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n    };\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n        get: function () {\n            return this.getLineOffsets().length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return FullTextDocument;\n}());\nvar Is;\n(function (Is) {\n    var toString = Object.prototype.toString;\n    function defined(value) {\n        return typeof value !== 'undefined';\n    }\n    Is.defined = defined;\n    function undefined(value) {\n        return typeof value === 'undefined';\n    }\n    Is.undefined = undefined;\n    function boolean(value) {\n        return value === true || value === false;\n    }\n    Is.boolean = boolean;\n    function string(value) {\n        return toString.call(value) === '[object String]';\n    }\n    Is.string = string;\n    function number(value) {\n        return toString.call(value) === '[object Number]';\n    }\n    Is.number = number;\n    function func(value) {\n        return toString.call(value) === '[object Function]';\n    }\n    Is.func = func;\n    function typedArray(value, check) {\n        return Array.isArray(value) && value.every(check);\n    }\n    Is.typedArray = typedArray;\n})(Is || (Is = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport * as ls from './_deps/vscode-languageserver-types/main.js';\nvar Uri = monaco.Uri;\nvar Range = monaco.Range;\n// --- diagnostics --- ---\nvar DiagnosticsAdapter = /** @class */ (function () {\n    function DiagnosticsAdapter(_languageId, _worker, defaults) {\n        var _this = this;\n        this._languageId = _languageId;\n        this._worker = _worker;\n        this._disposables = [];\n        this._listener = Object.create(null);\n        var onModelAdd = function (model) {\n            var modeId = model.getModeId();\n            if (modeId !== _this._languageId) {\n                return;\n            }\n            var handle;\n            _this._listener[model.uri.toString()] = model.onDidChangeContent(function () {\n                clearTimeout(handle);\n                handle = setTimeout(function () { return _this._doValidate(model.uri, modeId); }, 500);\n            });\n            _this._doValidate(model.uri, modeId);\n        };\n        var onModelRemoved = function (model) {\n            monaco.editor.setModelMarkers(model, _this._languageId, []);\n            var uriStr = model.uri.toString();\n            var listener = _this._listener[uriStr];\n            if (listener) {\n                listener.dispose();\n                delete _this._listener[uriStr];\n            }\n        };\n        this._disposables.push(monaco.editor.onDidCreateModel(onModelAdd));\n        this._disposables.push(monaco.editor.onWillDisposeModel(function (model) {\n            onModelRemoved(model);\n        }));\n        this._disposables.push(monaco.editor.onDidChangeModelLanguage(function (event) {\n            onModelRemoved(event.model);\n            onModelAdd(event.model);\n        }));\n        this._disposables.push(defaults.onDidChange(function (_) {\n            monaco.editor.getModels().forEach(function (model) {\n                if (model.getModeId() === _this._languageId) {\n                    onModelRemoved(model);\n                    onModelAdd(model);\n                }\n            });\n        }));\n        this._disposables.push({\n            dispose: function () {\n                for (var key in _this._listener) {\n                    _this._listener[key].dispose();\n                }\n            }\n        });\n        monaco.editor.getModels().forEach(onModelAdd);\n    }\n    DiagnosticsAdapter.prototype.dispose = function () {\n        this._disposables.forEach(function (d) { return d && d.dispose(); });\n        this._disposables = [];\n    };\n    DiagnosticsAdapter.prototype._doValidate = function (resource, languageId) {\n        this._worker(resource).then(function (worker) {\n            return worker.doValidation(resource.toString()).then(function (diagnostics) {\n                var markers = diagnostics.map(function (d) { return toDiagnostics(resource, d); });\n                monaco.editor.setModelMarkers(monaco.editor.getModel(resource), languageId, markers);\n            });\n        }).then(undefined, function (err) {\n            console.error(err);\n        });\n    };\n    return DiagnosticsAdapter;\n}());\nexport { DiagnosticsAdapter };\nfunction toSeverity(lsSeverity) {\n    switch (lsSeverity) {\n        case ls.DiagnosticSeverity.Error: return monaco.MarkerSeverity.Error;\n        case ls.DiagnosticSeverity.Warning: return monaco.MarkerSeverity.Warning;\n        case ls.DiagnosticSeverity.Information: return monaco.MarkerSeverity.Info;\n        case ls.DiagnosticSeverity.Hint: return monaco.MarkerSeverity.Hint;\n        default:\n            return monaco.MarkerSeverity.Info;\n    }\n}\nfunction toDiagnostics(resource, diag) {\n    var code = typeof diag.code === 'number' ? String(diag.code) : diag.code;\n    return {\n        severity: toSeverity(diag.severity),\n        startLineNumber: diag.range.start.line + 1,\n        startColumn: diag.range.start.character + 1,\n        endLineNumber: diag.range.end.line + 1,\n        endColumn: diag.range.end.character + 1,\n        message: diag.message,\n        code: code,\n        source: diag.source\n    };\n}\n// --- completion ------\nfunction fromPosition(position) {\n    if (!position) {\n        return void 0;\n    }\n    return { character: position.column - 1, line: position.lineNumber - 1 };\n}\nfunction fromRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return { start: fromPosition(range.getStartPosition()), end: fromPosition(range.getEndPosition()) };\n}\nfunction toRange(range) {\n    if (!range) {\n        return void 0;\n    }\n    return new Range(range.start.line + 1, range.start.character + 1, range.end.line + 1, range.end.character + 1);\n}\nfunction toCompletionItemKind(kind) {\n    var mItemKind = monaco.languages.CompletionItemKind;\n    switch (kind) {\n        case ls.CompletionItemKind.Text: return mItemKind.Text;\n        case ls.CompletionItemKind.Method: return mItemKind.Method;\n        case ls.CompletionItemKind.Function: return mItemKind.Function;\n        case ls.CompletionItemKind.Constructor: return mItemKind.Constructor;\n        case ls.CompletionItemKind.Field: return mItemKind.Field;\n        case ls.CompletionItemKind.Variable: return mItemKind.Variable;\n        case ls.CompletionItemKind.Class: return mItemKind.Class;\n        case ls.CompletionItemKind.Interface: return mItemKind.Interface;\n        case ls.CompletionItemKind.Module: return mItemKind.Module;\n        case ls.CompletionItemKind.Property: return mItemKind.Property;\n        case ls.CompletionItemKind.Unit: return mItemKind.Unit;\n        case ls.CompletionItemKind.Value: return mItemKind.Value;\n        case ls.CompletionItemKind.Enum: return mItemKind.Enum;\n        case ls.CompletionItemKind.Keyword: return mItemKind.Keyword;\n        case ls.CompletionItemKind.Snippet: return mItemKind.Snippet;\n        case ls.CompletionItemKind.Color: return mItemKind.Color;\n        case ls.CompletionItemKind.File: return mItemKind.File;\n        case ls.CompletionItemKind.Reference: return mItemKind.Reference;\n    }\n    return mItemKind.Property;\n}\nfunction fromCompletionItemKind(kind) {\n    var mItemKind = monaco.languages.CompletionItemKind;\n    switch (kind) {\n        case mItemKind.Text: return ls.CompletionItemKind.Text;\n        case mItemKind.Method: return ls.CompletionItemKind.Method;\n        case mItemKind.Function: return ls.CompletionItemKind.Function;\n        case mItemKind.Constructor: return ls.CompletionItemKind.Constructor;\n        case mItemKind.Field: return ls.CompletionItemKind.Field;\n        case mItemKind.Variable: return ls.CompletionItemKind.Variable;\n        case mItemKind.Class: return ls.CompletionItemKind.Class;\n        case mItemKind.Interface: return ls.CompletionItemKind.Interface;\n        case mItemKind.Module: return ls.CompletionItemKind.Module;\n        case mItemKind.Property: return ls.CompletionItemKind.Property;\n        case mItemKind.Unit: return ls.CompletionItemKind.Unit;\n        case mItemKind.Value: return ls.CompletionItemKind.Value;\n        case mItemKind.Enum: return ls.CompletionItemKind.Enum;\n        case mItemKind.Keyword: return ls.CompletionItemKind.Keyword;\n        case mItemKind.Snippet: return ls.CompletionItemKind.Snippet;\n        case mItemKind.Color: return ls.CompletionItemKind.Color;\n        case mItemKind.File: return ls.CompletionItemKind.File;\n        case mItemKind.Reference: return ls.CompletionItemKind.Reference;\n    }\n    return ls.CompletionItemKind.Property;\n}\nfunction toTextEdit(textEdit) {\n    if (!textEdit) {\n        return void 0;\n    }\n    return {\n        range: toRange(textEdit.range),\n        text: textEdit.newText\n    };\n}\nfunction toCompletionItem(entry) {\n    return {\n        label: entry.label,\n        insertText: entry.insertText,\n        sortText: entry.sortText,\n        filterText: entry.filterText,\n        documentation: entry.documentation,\n        detail: entry.detail,\n        kind: toCompletionItemKind(entry.kind),\n        textEdit: toTextEdit(entry.textEdit),\n        data: entry.data\n    };\n}\nfunction fromMarkdownString(entry) {\n    return {\n        kind: (typeof entry === 'string' ? ls.MarkupKind.PlainText : ls.MarkupKind.Markdown),\n        value: (typeof entry === 'string' ? entry : entry.value)\n    };\n}\nfunction fromCompletionItem(entry) {\n    var item = {\n        label: entry.label,\n        sortText: entry.sortText,\n        filterText: entry.filterText,\n        documentation: fromMarkdownString(entry.documentation),\n        detail: entry.detail,\n        kind: fromCompletionItemKind(entry.kind),\n        data: entry.data\n    };\n    if (typeof entry.insertText === 'object' && typeof entry.insertText.value === 'string') {\n        item.insertText = entry.insertText.value;\n        item.insertTextFormat = ls.InsertTextFormat.Snippet;\n    }\n    else {\n        item.insertText = entry.insertText;\n    }\n    if (entry.range) {\n        item.textEdit = ls.TextEdit.replace(fromRange(entry.range), item.insertText);\n    }\n    return item;\n}\nvar CompletionAdapter = /** @class */ (function () {\n    function CompletionAdapter(_worker) {\n        this._worker = _worker;\n    }\n    Object.defineProperty(CompletionAdapter.prototype, \"triggerCharacters\", {\n        get: function () {\n            return ['.', ':', '<', '\"', '=', '/'];\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CompletionAdapter.prototype.provideCompletionItems = function (model, position, token) {\n        var wordInfo = model.getWordUntilPosition(position);\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.doComplete(resource.toString(), fromPosition(position));\n        }).then(function (info) {\n            if (!info) {\n                return;\n            }\n            var items = info.items.map(function (entry) {\n                var item = {\n                    label: entry.label,\n                    insertText: entry.insertText,\n                    sortText: entry.sortText,\n                    filterText: entry.filterText,\n                    documentation: entry.documentation,\n                    detail: entry.detail,\n                    kind: toCompletionItemKind(entry.kind),\n                };\n                if (entry.textEdit) {\n                    item.range = toRange(entry.textEdit.range);\n                    item.insertText = entry.textEdit.newText;\n                }\n                if (entry.insertTextFormat === ls.InsertTextFormat.Snippet) {\n                    item.insertText = { value: item.insertText };\n                }\n                return item;\n            });\n            return {\n                isIncomplete: info.isIncomplete,\n                items: items\n            };\n        }));\n    };\n    return CompletionAdapter;\n}());\nexport { CompletionAdapter };\nfunction isMarkupContent(thing) {\n    return thing && typeof thing === 'object' && typeof thing.kind === 'string';\n}\nfunction toMarkdownString(entry) {\n    if (typeof entry === 'string') {\n        return {\n            value: entry\n        };\n    }\n    if (isMarkupContent(entry)) {\n        if (entry.kind === 'plaintext') {\n            return {\n                value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&')\n            };\n        }\n        return {\n            value: entry.value\n        };\n    }\n    return { value: '```' + entry.language + '\\n' + entry.value + '\\n```\\n' };\n}\nfunction toMarkedStringArray(contents) {\n    if (!contents) {\n        return void 0;\n    }\n    if (Array.isArray(contents)) {\n        return contents.map(toMarkdownString);\n    }\n    return [toMarkdownString(contents)];\n}\n// --- definition ------\nfunction toLocation(location) {\n    return {\n        uri: Uri.parse(location.uri),\n        range: toRange(location.range)\n    };\n}\n// --- document symbols ------\nfunction toSymbolKind(kind) {\n    var mKind = monaco.languages.SymbolKind;\n    switch (kind) {\n        case ls.SymbolKind.File: return mKind.Array;\n        case ls.SymbolKind.Module: return mKind.Module;\n        case ls.SymbolKind.Namespace: return mKind.Namespace;\n        case ls.SymbolKind.Package: return mKind.Package;\n        case ls.SymbolKind.Class: return mKind.Class;\n        case ls.SymbolKind.Method: return mKind.Method;\n        case ls.SymbolKind.Property: return mKind.Property;\n        case ls.SymbolKind.Field: return mKind.Field;\n        case ls.SymbolKind.Constructor: return mKind.Constructor;\n        case ls.SymbolKind.Enum: return mKind.Enum;\n        case ls.SymbolKind.Interface: return mKind.Interface;\n        case ls.SymbolKind.Function: return mKind.Function;\n        case ls.SymbolKind.Variable: return mKind.Variable;\n        case ls.SymbolKind.Constant: return mKind.Constant;\n        case ls.SymbolKind.String: return mKind.String;\n        case ls.SymbolKind.Number: return mKind.Number;\n        case ls.SymbolKind.Boolean: return mKind.Boolean;\n        case ls.SymbolKind.Array: return mKind.Array;\n    }\n    return mKind.Function;\n}\nfunction toHighlighKind(kind) {\n    var mKind = monaco.languages.DocumentHighlightKind;\n    switch (kind) {\n        case ls.DocumentHighlightKind.Read: return mKind.Read;\n        case ls.DocumentHighlightKind.Write: return mKind.Write;\n        case ls.DocumentHighlightKind.Text: return mKind.Text;\n    }\n    return mKind.Text;\n}\nvar DocumentHighlightAdapter = /** @class */ (function () {\n    function DocumentHighlightAdapter(_worker) {\n        this._worker = _worker;\n    }\n    DocumentHighlightAdapter.prototype.provideDocumentHighlights = function (model, position, token) {\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) { return worker.findDocumentHighlights(resource.toString(), fromPosition(position)); }).then(function (items) {\n            if (!items) {\n                return;\n            }\n            return items.map(function (item) { return ({\n                range: toRange(item.range),\n                kind: toHighlighKind(item.kind)\n            }); });\n        }));\n    };\n    return DocumentHighlightAdapter;\n}());\nexport { DocumentHighlightAdapter };\nvar DocumentLinkAdapter = /** @class */ (function () {\n    function DocumentLinkAdapter(_worker) {\n        this._worker = _worker;\n    }\n    DocumentLinkAdapter.prototype.provideLinks = function (model, token) {\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) { return worker.findDocumentLinks(resource.toString()); }).then(function (items) {\n            if (!items) {\n                return;\n            }\n            return items.map(function (item) { return ({\n                range: toRange(item.range),\n                url: item.target\n            }); });\n        }));\n    };\n    return DocumentLinkAdapter;\n}());\nexport { DocumentLinkAdapter };\nfunction fromFormattingOptions(options) {\n    return {\n        tabSize: options.tabSize,\n        insertSpaces: options.insertSpaces\n    };\n}\nvar DocumentFormattingEditProvider = /** @class */ (function () {\n    function DocumentFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentFormattingEditProvider.prototype.provideDocumentFormattingEdits = function (model, options, token) {\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.format(resource.toString(), null, fromFormattingOptions(options)).then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        }));\n    };\n    return DocumentFormattingEditProvider;\n}());\nexport { DocumentFormattingEditProvider };\nvar DocumentRangeFormattingEditProvider = /** @class */ (function () {\n    function DocumentRangeFormattingEditProvider(_worker) {\n        this._worker = _worker;\n    }\n    DocumentRangeFormattingEditProvider.prototype.provideDocumentRangeFormattingEdits = function (model, range, options, token) {\n        var resource = model.uri;\n        return wireCancellationToken(token, this._worker(resource).then(function (worker) {\n            return worker.format(resource.toString(), fromRange(range), fromFormattingOptions(options)).then(function (edits) {\n                if (!edits || edits.length === 0) {\n                    return;\n                }\n                return edits.map(toTextEdit);\n            });\n        }));\n    };\n    return DocumentRangeFormattingEditProvider;\n}());\nexport { DocumentRangeFormattingEditProvider };\n/**\n * Hook a cancellation token to a WinJS Promise\n */\nfunction wireCancellationToken(token, promise) {\n    if (promise.cancel) {\n        token.onCancellationRequested(function () { return promise.cancel(); });\n    }\n    return promise;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nimport { WorkerManager } from './workerManager.js';\nimport * as languageFeatures from './languageFeatures.js';\nexport function setupMode(defaults) {\n    var client = new WorkerManager(defaults);\n    var worker = function () {\n        var uris = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            uris[_i] = arguments[_i];\n        }\n        return client.getLanguageServiceWorker.apply(client, uris);\n    };\n    var languageId = defaults.languageId;\n    // all modes\n    monaco.languages.registerCompletionItemProvider(languageId, new languageFeatures.CompletionAdapter(worker));\n    monaco.languages.registerDocumentHighlightProvider(languageId, new languageFeatures.DocumentHighlightAdapter(worker));\n    monaco.languages.registerLinkProvider(languageId, new languageFeatures.DocumentLinkAdapter(worker));\n    // only html\n    if (languageId === 'html') {\n        monaco.languages.registerDocumentFormattingEditProvider(languageId, new languageFeatures.DocumentFormattingEditProvider(worker));\n        monaco.languages.registerDocumentRangeFormattingEditProvider(languageId, new languageFeatures.DocumentRangeFormattingEditProvider(worker));\n        new languageFeatures.DiagnosticsAdapter(languageId, worker, defaults);\n    }\n}\n"]}